apiVersion: v1
kind: Secret
metadata:
  # Name MUST be of form "bootstrap-token-<token id>"
  name: bootstrap-token-<%= scope['kubernetes::token_id'] %>
  namespace: kube-system
  labels:
    addonmanager.kubernetes.io/mode: "Reconcile"

# Type MUST be 'bootstrap.kubernetes.io/token'
type: bootstrap.kubernetes.io/token
stringData:
  # Human readable description. Optional.
  description: "Created for Kubernetes"

  # Token ID and secret. Required.
  token-id: <%= scope['kubernetes::token_id'] %>
  token-secret: <%= scope['kubernetes::token_secret'] %>

  # Allowed usages.
  usage-bootstrap-authentication: "true"
  usage-bootstrap-signing: "true"
